{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/waver/source/repos/Phone_Book_Dotnet_Angular/Phone_Book_Dotnet_Angular/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { DIALOG_DATA } from '@angular/cdk/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nexport class AddPhoneComponent {\n  constructor(http, router, baseUrl, data) {\n    this.http = http;\n    this.router = router;\n    this.baseUrl = baseUrl;\n    this.data = data;\n    this.phone = {\n      name: '',\n      surname: '',\n      phone: ''\n    };\n    this.phones = [];\n  }\n\n  ngOnInit() {\n    console.log(this.data);\n\n    if (this.data) {\n      this.phone = this.data;\n    }\n  }\n\n  submit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const login = _this.phone;\n\n      if ((yield _this.checkSurname()) == true) {\n        _this.http.post(_this.baseUrl + 'values', {\n          Name: login.name,\n          Surname: login.surname,\n          Phone: login.phone\n        }).subscribe();\n\n        _this.router.navigate(['/']);\n      }\n    })();\n  }\n\n  checkSurname() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const login = _this2.phone;\n      yield _this2.http.get(_this2.baseUrl + 'values').subscribe(result => {\n        _this2.phones = result;\n      }, error => console.error(error));\n\n      for (var i = 0; i < _this2.phones.length; i++) {\n        if (login.surname == _this2.phones[i].surname) {\n          window.alert(\"Извините, такая фамилия уже существует\");\n          return false;\n        }\n      }\n\n      return true;\n    })();\n  }\n\n}\n\nAddPhoneComponent.ɵfac = function AddPhoneComponent_Factory(t) {\n  return new (t || AddPhoneComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(DIALOG_DATA, 8));\n};\n\nAddPhoneComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddPhoneComponent,\n  selectors: [[\"app-add-phone\"]],\n  decls: 22,\n  vars: 3,\n  consts: [[1, \"main\"], [1, \"main-cont\"], [1, \"logo\"], [\"method\", \"post\", 3, \"ngSubmit\"], [\"login\", \"ngForm\"], [1, \"form-cont\"], [1, \"labels\"], [1, \"name-inp\", \"inp\"], [\"type\", \"text\", \"name\", \"Name\", \"maxlength\", \"50\", \"pattern\", \"[a-zA-Z ]*\", 3, \"ngModel\", \"ngModelChange\"], [1, \"surname-inp\", \"inp\"], [\"type\", \"text\", \"name\", \"Surname\", \"maxlength\", \"50\", \"required\", \"\", \"pattern\", \"[a-zA-Z ]*\", 3, \"ngModel\", \"ngModelChange\"], [1, \"phone-inp\", \"inp\"], [\"type\", \"tel\", \"name\", \"Phone\", \"maxlength\", \"50\", 3, \"ngModel\", \"ngModelChange\"], [1, \"but-cont\"], [\"type\", \"submit\", \"value\", \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"]],\n  template: function AddPhoneComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\");\n      i0.ɵɵtext(4, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"form\", 3, 4);\n      i0.ɵɵlistener(\"ngSubmit\", function AddPhoneComponent_Template_form_ngSubmit_5_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"label\", 6);\n      i0.ɵɵtext(9, \"\\u0418\\u043C\\u044F: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 7)(11, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function AddPhoneComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.phone.name = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"label\", 6);\n      i0.ɵɵtext(13, \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 9)(15, \"input\", 10);\n      i0.ɵɵlistener(\"ngModelChange\", function AddPhoneComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.phone.surname = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"label\", 6);\n      i0.ɵɵtext(17, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 11)(19, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function AddPhoneComponent_Template_input_ngModelChange_19_listener($event) {\n        return ctx.phone.phone = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"div\", 13);\n      i0.ɵɵelement(21, \"input\", 14);\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngModel\", ctx.phone.name);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.phone.surname);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.phone.phone);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.MaxLengthValidator, i3.PatternValidator, i3.NgModel, i3.NgForm],\n  styles: [\".main[_ngcontent-%COMP%] {\\n  height: 100vh;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.main-cont[_ngcontent-%COMP%] {\\n  color: white;\\n  width: 30rem;\\n  border-radius: 30px;\\n  background: #af8383;\\n  box-shadow: 20px 20px 60px #956f6f, -20px -20px 60px #c99797;\\n}\\n.form-cont[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-rows: 1fr 1fr 1fr;\\n  grid-template-columns: 1fr 1fr;\\n  height: 50vh;\\n}\\n.form-cont[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  column-span: all;\\n}\\n.name-inp[_ngcontent-%COMP%] {\\n  grid-column-start: 2;\\n}\\n.logo[_ngcontent-%COMP%] {\\n  margin-top: 2rem;\\n  margin-bottom: 2rem;\\n  display: flex;\\n  justify-content: center;\\n}\\n.inp[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: left;\\n}\\n.inp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  margin-right: 2rem;\\n}\\n.submit-cont[_ngcontent-%COMP%] {\\n  column-span: all;\\n  width: 100%;\\n}\\n.labels[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: right;\\n  align-items: center;\\n}\\n.but-cont[_ngcontent-%COMP%] {\\n  margin-bottom: 1rem;\\n  width: 100%;\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center;\\n}\\n.but-cont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  border-radius: 5px;\\n  background: #af8383;\\n  color: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1waG9uZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtFQUNiLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixtQkFBbUI7RUFDbkIsNERBQTREO0FBQzlEO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsK0JBQStCO0VBQy9CLDhCQUE4QjtFQUM5QixZQUFZO0FBQ2Q7QUFDQTtFQUNFLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0Usb0JBQW9CO0FBQ3RCO0FBQ0E7RUFDRSxnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLGFBQWE7RUFDYix1QkFBdUI7QUFDekI7QUFDQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIscUJBQXFCO0FBQ3ZCO0FBQ0E7RUFDRSxrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2I7QUFDQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxtQkFBbUI7RUFDbkIsV0FBVztFQUNYLGFBQWE7RUFDYiw2QkFBNkI7RUFDN0IsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLFlBQVk7QUFDZCIsImZpbGUiOiJhZGQtcGhvbmUuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYWluIHtcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG4ubWFpbi1jb250IHtcbiAgY29sb3I6IHdoaXRlO1xuICB3aWR0aDogMzByZW07XG4gIGJvcmRlci1yYWRpdXM6IDMwcHg7XG4gIGJhY2tncm91bmQ6ICNhZjgzODM7XG4gIGJveC1zaGFkb3c6IDIwcHggMjBweCA2MHB4ICM5NTZmNmYsIC0yMHB4IC0yMHB4IDYwcHggI2M5OTc5Nztcbn1cbi5mb3JtLWNvbnQge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLXRlbXBsYXRlLXJvd3M6IDFmciAxZnIgMWZyO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gIGhlaWdodDogNTB2aDtcbn1cbi5mb3JtLWNvbnQgaDEge1xuICBjb2x1bW4tc3BhbjogYWxsO1xufVxuLm5hbWUtaW5wIHtcbiAgZ3JpZC1jb2x1bW4tc3RhcnQ6IDI7XG59XG4ubG9nbyB7XG4gIG1hcmdpbi10b3A6IDJyZW07XG4gIG1hcmdpbi1ib3R0b206IDJyZW07XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuLmlucCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogbGVmdDtcbn1cbi5pbnAgaW5wdXQge1xuICBtYXJnaW4tcmlnaHQ6IDJyZW07XG59XG4uc3VibWl0LWNvbnQge1xuICBjb2x1bW4tc3BhbjogYWxsO1xuICB3aWR0aDogMTAwJTtcbn1cbi5sYWJlbHMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHJpZ2h0O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuLmJ1dC1jb250IHtcbiAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbiAgd2lkdGg6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuLmJ1dC1jb250IGlucHV0IHtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBiYWNrZ3JvdW5kOiAjYWY4MzgzO1xuICBjb2xvcjogd2hpdGU7XG59XG4iXX0= */\"]\n});","map":{"version":3,"mappings":";AAGA,SAASA,WAAT,QAA4B,qBAA5B;;;;;AAOA,OAAM,MAAOC,iBAAP,CAAwB;EAQ5BC,YACUC,IADV,EAEUC,MAFV,EAG8BC,OAH9B,EAI0CC,IAJ1C,EAIsD;IAH5C;IACA;IACoB;IACY;IAX1C,aAAgB;MACdC,IAAI,EAAE,EADQ;MAEdC,OAAO,EAAE,EAFK;MAGdC,KAAK,EAAE;IAHO,CAAhB;IAKA,cAAmB,EAAnB;EAOI;;EAEJC,QAAQ;IACNC,OAAO,CAACC,GAAR,CAAY,KAAKN,IAAjB;;IACA,IAAI,KAAKA,IAAT,EAAe;MACb,KAAKG,KAAL,GAAa,KAAKH,IAAlB;IACD;EACF;;EACYO,MAAM;IAAA;;IAAA;MACjB,MAAMC,KAAK,GAAG,KAAI,CAACL,KAAnB;;MACA,IAAI,OAAM,KAAI,CAACM,YAAL,EAAN,KAA6B,IAAjC,EAAuC;QACrC,KAAI,CAACZ,IAAL,CACGa,IADH,CACc,KAAI,CAACX,OAAL,GAAe,QAD7B,EACuC;UACnCY,IAAI,EAAEH,KAAK,CAACP,IADuB;UAEnCW,OAAO,EAAEJ,KAAK,CAACN,OAFoB;UAGnCW,KAAK,EAAEL,KAAK,CAACL;QAHsB,CADvC,EAMGW,SANH;;QAOA,KAAI,CAAChB,MAAL,CAAYiB,QAAZ,CAAqB,CAAC,GAAD,CAArB;MACD;IAXgB;EAYlB;;EACYN,YAAY;IAAA;;IAAA;MACvB,MAAMD,KAAK,GAAG,MAAI,CAACL,KAAnB;MACA,MAAM,MAAI,CAACN,IAAL,CAAUmB,GAAV,CAAwB,MAAI,CAACjB,OAAL,GAAe,QAAvC,EAAiDe,SAAjD,CACHG,MAAD,IAAW;QACT,MAAI,CAACC,MAAL,GAAcD,MAAd;MACD,CAHG,EAIHE,KAAD,IAAWd,OAAO,CAACc,KAAR,CAAcA,KAAd,CAJP,CAAN;;MAKA,KAAK,IAAIC,CAAC,GAAW,CAArB,EAAwBA,CAAC,GAAG,MAAI,CAACF,MAAL,CAAYG,MAAxC,EAAgDD,CAAC,EAAjD,EAAqD;QACnD,IAAIZ,KAAK,CAACN,OAAN,IAAiB,MAAI,CAACgB,MAAL,CAAYE,CAAZ,EAAelB,OAApC,EAA6C;UAC3CoB,MAAM,CAACC,KAAP,CAAa,wCAAb;UACA,OAAO,KAAP;QACD;MACF;;MACD,OAAO,IAAP;IAbuB;EAcxB;;AAhD2B;;;mBAAjB5B,mBAAiB6B,2FAWlB,UAXkB,GAWRA,qBACE9B,WADF,EACa,CADb;AACa;;;QAZtBC;EAAiB8B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCV9BL,+BAAkB,CAAlB,EAAkB,KAAlB,EAAkB,CAAlB,EAAkB,CAAlB,EAAkB,KAAlB,EAAkB,CAAlB,EAAkB,CAAlB,EAAkB,IAAlB;MAGUA;MAAgBA;MAEtBA;MAAoCA;QAAA,OAAYM,YAAZ;MAAoB,CAApB;MAClCN,+BAAuB,CAAvB,EAAuB,OAAvB,EAAuB,CAAvB;MACwBA;MAAKA;MAC3BA,gCAA0B,EAA1B,EAA0B,OAA1B,EAA0B,CAA1B;MACiCA;QAAA;MAAA;MAA/BA;MAEFA;MAAsBA;MAASA;MAC/BA,gCAA6B,EAA7B,EAA6B,OAA7B,EAA6B,EAA7B;MACoCA;QAAA;MAAA;MAAlCA;MAEFA;MAAsBA;MAASA;MAC/BA,iCAA2B,EAA3B,EAA2B,OAA3B,EAA2B,EAA3B;MACiCA;QAAA;MAAA;MAA/BA;MAGJA;MACEA;MACFA;;;;MAbmCA;MAAAA;MAIGA;MAAAA;MAIHA;MAAAA","names":["DIALOG_DATA","AddPhoneComponent","constructor","http","router","baseUrl","data","name","surname","phone","ngOnInit","console","log","submit","login","checkSurname","post","Name","Surname","Phone","subscribe","navigate","get","result","phones","error","i","length","window","alert","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\waver\\source\\repos\\Phone_Book_Dotnet_Angular\\Phone_Book_Dotnet_Angular\\ClientApp\\src\\app\\add-phone\\add-phone.component.ts","C:\\Users\\waver\\source\\repos\\Phone_Book_Dotnet_Angular\\Phone_Book_Dotnet_Angular\\ClientApp\\src\\app\\add-phone\\add-phone.component.html"],"sourcesContent":["import { Component, OnInit, Inject, Optional } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { DIALOG_DATA } from '@angular/cdk/dialog';\nimport { Values } from '../app.types';\n@Component({\n  selector: 'app-add-phone',\n  templateUrl: './add-phone.component.html',\n  styleUrls: ['./add-phone.component.css'],\n})\nexport class AddPhoneComponent implements OnInit {\n  phone: Values = {\n    name: '',\n    surname: '',\n    phone: '',\n  };\n  phones: Values[] = [];\n\n  constructor(\n    private http: HttpClient,\n    private router: Router,\n    @Inject('BASE_URL') private baseUrl: string,\n    @Optional() @Inject(DIALOG_DATA) public data: Values\n  ) {}\n\n  ngOnInit(): void {\n    console.log(this.data);\n    if (this.data) {\n      this.phone = this.data;\n    }\n  }\n  public async submit() {\n    const login = this.phone;\r\n    if (await this.checkSurname() == true) {\r\n      this.http\n        .post<void>(this.baseUrl + 'values', {\n          Name: login.name,\n          Surname: login.surname,\n          Phone: login.phone,\n        })\n        .subscribe();\n      this.router.navigate(['/']);\r\n    }\n  }\n  public async checkSurname() {\n    const login = this.phone;\n    await this.http.get<Values[]>(this.baseUrl + 'values').subscribe(\n      (result) => {\n        this.phones = result;\n      },\n      (error) => console.error(error));\r\n    for (var i: number = 0; i < this.phones.length; i++) {\n      if (login.surname == this.phones[i].surname) {\r\n        window.alert(\"Извините, такая фамилия уже существует\");\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\n}\n","<div class=\"main\">\n  <div class=\"main-cont\">\n    <div class=\"logo\">\n      <h1>Добавить контакт</h1>\n    </div>\n    <form #login=\"ngForm\" method=\"post\" (ngSubmit)=\"submit()\">\n      <div class=\"form-cont\">\n        <label class=\"labels\">Имя: </label>\n        <div class=\"name-inp inp\">\n          <input type=\"text\" name=\"Name\" [(ngModel)]=\"phone.name\" maxlength=\"50\" pattern=\"[a-zA-Z ]*\"/>\n        </div>\n        <label class=\"labels\">Фамилия: </label>\n        <div class=\"surname-inp inp\">\n          <input type=\"text\" name=\"Surname\" [(ngModel)]=\"phone.surname\" maxlength=\"50\" required pattern=\"[a-zA-Z ]*\"/>\n        </div>\n        <label class=\"labels\">Телефон: </label>\n        <div class=\"phone-inp inp\">\n          <input type=\"tel\" name=\"Phone\" [(ngModel)]=\"phone.phone\" maxlength=\"50\"/>\n        </div>\n      </div>\n      <div class=\"but-cont\">\n        <input type=\"submit\" value=\"Добавить\" />\n      </div>\n    </form>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module"}